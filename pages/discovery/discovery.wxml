<!--发现主页-->
<view class="discovery" style="visibility: {{canShow?'visible':'hidden'}};">
    <view id='first-screen'>
        <!-- 时尚视频轮播 -->
        <view class="swiper-video-module" wx:if='{{true}}'>
            <swiper indicator-dots="{{indicatorDots}}" previousMargin="38" nextMargin='18'
                bindchange='changeSwiperCurrent' current="{{swiperVideoCurrent}}">
                <block wx:for="{{swiperVideoList}}" wx:key="index">
                    <swiper-item item-id='swiper-video-swiper-item'>
                        <view class="swiper-video-item {{item}}">
                            <view class="swiper-video-item-box">
                                <video src="{{item.video_url}}" object-fit="fill" controls="{{false}}"
                                    show-center-play-btn="{{false}}"></video>
                                <cover-image src="https://huayang-img.oss-cn-shanghai.aliyuncs.com/1629860904cymQmM.jpg"
                                    class="swiper-video-play-icon" wx:if="{{swiperVideoCurrent===index}}"></cover-image>
                            </view>
                        </view>
                    </swiper-item>
                </block>
            </swiper>
        </view>

        <!-- 广告位 -->
        <view class="advertisement-module" wx:if='{{advertisementList}}'>
            <image src="{{advertisementList}}" style="height:{{advertisementImageHeight}}px"
                class="advertisement-item-image"></image>
        </view>
    </view>

    <!-- 金刚位 -->
    <view class="fixed-site-module">
        <view class="fixed-site-list" id='fixed-site-list'>
            <view class="fixed-site-item" bindtap="fixedSiteItemTap" data-item="{{item}}" wx:for="{{fixedSiteList}}"
                wx:key='index'>
                <image src="{{item.icon}}"></image>
                <text>{{item.title}}</text>
                <view class="fixed-site-popup" wx:if="{{item.title==='每日签到'&&showGoodMorningNoticePopup}}">
                    <view class="fixed-site-popup-cover">
                        <image src="{{item.icon}}"></image>
                        <text>{{item.title}}</text>
                    </view>
                    <view class="fixed-site-popup-box">
                        <view>每日早安签到</view>
                        <view>开启美好新一天</view>
                    </view>
                </view>
            </view>
        </view>
    </view>

    <!-- 最新活动 -->
    <view class="new-activity-module">
        <view class="new-activity-title">
            <view class="new-activity-title-left">
                <view class="new-activity-main-title">花样最新活动</view>
                <view class="new-activity-sub-title">过积极、健康、时尚的品质生活</view>
            </view>
            <view class="new-activity-title-right">
                <image src="https://huayang-img.oss-cn-shanghai.aliyuncs.com/1629777041DSFiML.jpg"></image>
                <text class="new-activity-title-right-one">今天</text>
                <text class="new-activity-title-right-two">{{nowDate}}</text>
            </view>
        </view>
        <view class="new-activity-main">
            <view class="new-activity-item" wx:for="{{newActivityList}}" wx:key='index' bindtap="newActivityItemTap"
                data-item="{{item.link_url}}" data-type='{{item.type}}'>
                <view class="new-activity-item-top">
                    <image src="{{item.cover}}">
                    </image>
                    <view class="new-activity-item-label">{{item.label}}</view>
                </view>
                <view class="new-activity-item-title">{{item.title}}</view>
                <view class="new-activity-item-bottom">
                    <view class="new-activity-item-bottom-date">{{item.time}}</view>
                    <view class="new-activity-item-bottom-button">点击查看</view>
                </view>
            </view>
        </view>
    </view>

    <!-- 精品课程 -->
    <bestCourseLayout wx:if="{{courseList.length > 0}}" courseList="{{courseList}}" />

    <!-- 校友活动 -->
    <view class="college-activity" wx:if="{{activityList.length > 0}}">
        <view class="layer">校友活动</view>
        <view class="college-activity-item" wx:for="{{activityList}}" wx:key="index" data-item="{{item}}"
            bindtap="onCollegeActivityTap">
            <image class="college-activity-picture" mode="aspectFill" src="{{item.cover_url}}"></image>
            <view class="college-activity-title limit-two-line">{{item.title}}</view>
        </view>
    </view>

    <!-- 花样游学 -->
    <view class="travel" wx:if="{{travelList.length > 0}}">
        <view class="travel-layout">花样游学</view>
        <view class="travel-item" wx:for="{{travelList}}" wx:key="index" bindtap="onTravelTap" data-item="{{item}}">
            <swiper class="travel-cover" circular autoplay interval="{{3500 + index * 300}}" duration="{{500}}">
                <swiper-item wx:for="{{item.covers}}" wx:for-item="coverItem" wx:key="index" data-item="{{coverItem}}">
                    <image class="travel-cover" src="{{coverItem}}" mode="aspectFill"></image>
                </swiper-item>
            </swiper>
            <view class="travel-title limit-two-line">{{item.title}}</view>
            <view class="travel-info">
                <view class="travel-price">¥<text class="price-01">{{item.discount_price / 100}}</text><text
                        wx:if="{{item.price}}" class="price-02">¥{{item.price / 100}}</text>
                </view>
                <view class="travel-visit-no">{{item.visit_count}}人看过</view>
            </view>
        </view>

        <view class="more-travel" bindtap="onMoreTravelLineTap">查看更多游学路线 ›</view>
    </view>

    <!-- 线下乐活课堂 -->
    <view class="offline-course" wx:if="{{offlineList.length > 0}}">
        <view class="layer">线下乐活课堂</view>
        <view class="offline-course-item" wx:for="{{offlineList}}" wx:key="index" data-item="{{item}}"
            bindtap="goToOfflineCourseDetail">
            <image class="pic" src="{{item.cover}}" mode="aspectFill"></image>
            <view class="title limit-two-line">{{item.title}}</view>
            <view class="info">
                <view class="info-wrap">
                    <view class="price-wrap">
                        <text>¥</text><text class="price">{{item.price}}</text>
                    </view>
                    <view class="discount-price-wrap">
                        <text class="discount-price">¥{{item.discount_price}}</text>
                        <image class="tag" src="https://huayang-img.oss-cn-shanghai.aliyuncs.com/1618455791dTGykq.jpg"
                            mode="aspectFit"></image>
                    </view>
                </view>
                <view class="no">{{item.buy_count}}人已购</view>
            </view>
        </view>
    </view>

    <!-- 直播 -->
    <liveLayout wx:if="{{liveList.length > 0}}" class="limit-two-line" liveList="{{liveList}}"
        bind:openUserAuth="openUserAuth" />

    <!-- 分隔 -->
    <view class="separate-line"></view>

    <!-- 大赛&活动 -->
    <view class="other-activity" wx:if="{{showModelBanner}}">
        <!-- 大赛 -->
        <view>
            <view class="competition-title">大赛</view>
            <view class="competition-list">
                <view class="competition-item" bindtap="toModelCompetition" data-item='{{item}}'
                    wx:for="{{competitionBannerList}}" wx:key="index">
                    <image mode="aspectFill" src="{{item.pic_url}}"></image>
                    <view class="competition-item-title">{{item.title}}</view>
                </view>
            </view>
        </view>
    </view>

    <!-- 全局消息弹窗 -->
    <view class="information" catchtouchmove="onCatchtouchmove" wx:if="{{didShowInformation}}">
        <view class="information-mask {{showInformationPopAnime ? 'animation' : ''}}"></view>
        <block wx:if="{{popData.type === 'new_kecheng'}}">
            <view class="information-content {{showInformationPopAnime ? 'animation' : ''}}">
                <view class="information-pop-title">{{popData.popTitle}}</view>
                <view class="information-pop-info">
                    <image class="information-teacher-avatar" mode="aspectFit" src="{{popData.avatar}}"></image>
                    <view class="information-course-info">
                        <text class="information-course-name limit-one-line">{{popData.title}}</text>
                        <text class="information-course-desc limit-two-line">{{popData.desc}}</text>
                        <text class="information-course-teacher-info limit-one-line">{{popData.name}}</text>
                    </view>
                </view>
                <view class="information-pop-btn" bindtap="onInformationPopTap">立即查看</view>
                <image class="information-pop-close" bindtap="closeInformationPop" mode="aspectFit"
                    src="https://huayang-img.oss-cn-shanghai.aliyuncs.com/1617938508Usopwi.jpg"></image>
                <view class="information-pop-clock">
                    <view class="information-pop-clock-item {{showInformationPopAnime ? 'animation' : ''}}"></view>
                </view>
            </view>
        </block>
        <block wx:if="{{popData.type === 'normal'}}">
            <view class="information-pop-picture-wrap" style="top: calc(50vh - 300rpx / {{popData.pictureRatio}});">
                <image class="information-pop-picture {{showInformationPopAnime ? 'animation' : ''}}"
                    bindtap="jumpToLink" src="{{popData.picture}}" mode="widthFix"></image>
                <image class="information-pop-close" bindtap="closeInformationPop" mode="aspectFit"
                    src="https://huayang-img.oss-cn-shanghai.aliyuncs.com/1617938508Usopwi.jpg"></image>
            </view>
        </block>
    </view>

    <!-- 早上好弹窗 -->
    <view class="good-morning-popup" wx:if="{{needShowGoodMorningPopup}}">
        <view class="good-morning-popup-box">
            <image src="https://huayang-img.oss-cn-shanghai.aliyuncs.com/1629790110bECsII.jpg"
                class="good-morning-icon">
            </image>
            <view class="good-morning-main">
                <view class="good-morning-main-title">早上好</view>
                <view class="good-morning-main-image">
                    <image src="{{goodMorningPopupBg}}">
                    </image>
                </view>
                <view class="good-morning-main-button" bindtap="showGoodMorningHighLight">早安签到</view>
            </view>
            <image src="https://huayang-img.oss-cn-shanghai.aliyuncs.com/1629790175dTzGqv.jpg"
                class="good-morning-close" bindtap="closeGoodMorningPopup">
            </image>
        </view>
    </view>

    <!-- 授权弹窗 -->
    <authModule show="{{didShowAuth}}" bind:authCancelEvent="authCancelEvent"
        bind:authCompleteEvent="authCompleteEvent">
    </authModule>

    <!-- 客服弹窗 -->
    <contact show="{{didShowContact}}" isRootPage="{{true}}" sessionFrom="sf_study_guide"
        bind:closeContactModal="onCloseContactModal" />

    <!-- 未加入花样大学用户，不可参加校友活动 -->
    <fluentLearnModal show="{{didShowFluentLearnModal}}" message="您还未加入花样老年大学" confirmText="立即加入"
        bind:close="onFluentLearnCloseTap" bind:confirm="onFluentLearnTap" />

    <!-- 全局遮罩层 -->
    <view class="global-cover" wx:if="{{needShowGoodMorningPopup||showGoodMorningNoticePopup}}" bindtap="closeAllPopup">
    </view>
</view>