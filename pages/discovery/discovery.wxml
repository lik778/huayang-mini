<!--发现主页-->
<view class="discovery" style="visibility: {{canShow?'visible':'hidden'}};">
    <!--  推广位 -->
    <view class="promotion" wx:if="{{bannerList.length!==0}}">
        <!-- banner 滚动区域 -->
        <view class="swiper-box" id="swiper-box">
            <swiper class="swiper-item-box" bindchange="changeSwiperIndex" circular autoplay interval="{{3000}}"
                    duration="{{500}}">
                <swiper-item wx:for="{{bannerList}}" wx:key="index" bindtap="joinCampFromBanner" data-item="{{item}}">
                    <view class="swiper-cover"></view>
                    <image mode="cover" src="{{item.pic_url}}"></image>
                </swiper-item>
            </swiper>
            <view class="swiper-dot">
                <view wx:for="{{bannerList}}" wx:key="index" wx:if="{{bannerList.length>1}}"
                      class="{{current===index?'active swiper-dot-item':'swiper-dot-item'}}"></view>
            </view>
        </view>
    </view>

    <!-- 金刚位 -->
    <view class="king-kong">
        <view class="king-kong-item" wx:for="{{kingKongs}}" wx:key="index" bindtap="onKingKongTap" data-item="{{item}}">
            <image class="king-kong-picture" src="{{item.pic}}" mode="aspectFit"></image>
            <text class="king-kong-text">{{item.value}}</text>
        </view>
    </view>

    <!-- 花样大学介绍 -->
    <view class="hy-intro" wx:if="{{!didFluentCardUser && collegeVideoUrl}}">
        <view class="layer" bindtap="goToJoinFluentCardPage">
            <text>花样大学介绍</text>
            <view class="hy-intro-btn">加入花样大学 ›</view>
        </view>
        <view class="hy-intro-video-wrap">
            <video id="hy-video-content" bindtap="goToJoinFluentCardPage" class="hy-video" src="{{collegeVideoUrl}}" poster="{{collegeVideoPost}}" controls="{{false}}"
                   custom-cache="{{false}}" object-fit="cover" enable-play-gesture="{{false}}"
                   enable-progress-gesture="{{false}}" play-btn-position="top" show-center-play-btn="{{false}}"
                   show-play-btn="{{false}}" autoplay="{{false}}" loop="{{true}}"></video>
            <image catchtap="onPlayCollegeVideo" wx:if="{{!isCollegeVideoPlaying}}" class="pause-icon" mode="aspectFit" src="https://huayang-img.oss-cn-shanghai.aliyuncs.com/1619061373BeZzQx.jpg"></image>
        </view>
    </view>

    <!-- 直播 -->
    <liveLayout wx:if="{{liveList.length > 0}}" class="limit-two-line" liveList="{{liveList}}"
                bind:openUserAuth="openUserAuth"/>

    <!-- 线下乐活课堂 -->
    <view class="offline-course">
        <view class="layer">线下乐活课堂</view>
        <view class="offline-course-item" wx:for="{{offlineList}}" wx:key="index" data-item="{{item}}" bindtap="goToOfflineCourseDetail">
            <image class="pic" src="{{item.cover}}" mode="aspectFill"></image>
            <view class="title limit-two-line">{{item.title}}</view>
            <view class="info">
                <view class="info-wrap">
                    <view class="price-wrap">
                        <text>¥</text><text class="price">{{item.price}}</text>
                    </view>
                    <view class="discount-price-wrap">
                        <text class="discount-price">¥{{item.discount_price}}</text>
                        <image class="tag" src="https://huayang-img.oss-cn-shanghai.aliyuncs.com/1618455791dTGykq.jpg"
                               mode="aspectFit"></image>
                    </view>
                </view>
                <view class="no">{{item.buy_count}}人已购</view>
            </view>
        </view>
    </view>

    <!-- 花样游学 -->
    <view class="travel" wx:if="{{travelList.length > 0}}">
        <view class="travel-layout">花样游学</view>
        <view class="travel-item" wx:for="{{travelList}}" wx:key="index" bindtap="onTravelTap" data-item="{{item}}">
            <swiper class="travel-cover" circular autoplay interval="{{3500 + index * 300}}" duration="{{500}}">
                <swiper-item wx:for="{{item.covers}}" wx:for-item="coverItem" wx:key="index" data-item="{{coverItem}}">
                    <image class="travel-cover" src="{{coverItem}}" mode="aspectFill"></image>
                </swiper-item>
            </swiper>
            <view class="travel-title limit-two-line">{{item.title}}</view>
            <view class="travel-info">
                <view class="travel-price">¥<text class="price-01">{{item.discount_price / 100}}</text><text
                        wx:if="{{item.price}}" class="price-02">¥{{item.price / 100}}</text>
                </view>
                <view class="travel-visit-no">{{item.visit_count}}人看过</view>
            </view>
        </view>

        <view class="more-travel" bindtap="onMoreTravelLineTap">查看更多游学路线 ›</view>
    </view>

    <!-- 校友活动 -->
    <view class="college-activity" wx:if="{{activityList.length > 0}}">
        <view class="layer">校友活动</view>
        <view class="college-activity-item" wx:for="{{activityList}}" wx:key="index" data-item="{{item}}" bindtap="onCollegeActivityTap">
            <image class="college-activity-picture" mode="aspectFill" src="{{item.cover_url}}"></image>
            <view class="college-activity-title limit-two-line">{{item.title}}</view>
        </view>
    </view>

    <!-- 今日推荐 -->
    <view class="today-recommend" wx:if="{{previewVideoLink}}" bindtap="onTodayRecommendTap">
        <view>今日推荐课程</view>
        <video id="preview-video-content" class="preview-video" src="{{previewVideoLink}}" controls="{{false}}"
               custom-cache="{{false}}" object-fit="cover" enable-play-gesture="{{false}}"
               enable-progress-gesture="{{false}}" play-btn-position="top" show-center-play-btn="{{false}}"
               show-play-btn="{{false}}" autoplay="{{false}}" loop="{{true}}"></video>
        <view class="recommend-course-title">{{todayRecommendCourse.kecheng_series.teacher_desc}}</view>
        <view class="recommend-course-info">
            <view class="recommend-course-info-title limit-one-line">{{todayRecommendCourse.kecheng_series.name}}</view>
            <view class="about-recommend-course">查看 ›</view>
        </view>
    </view>

    <!-- 精品课程 -->
    <bestCourseLayout wx:if="{{courseList.length > 0}}" courseList="{{courseList}}"/>

    <!-- 分隔 -->
    <view class="separate-line"></view>

    <!-- 大赛&活动 -->
    <view class="other-activity" wx:if="{{showModelBanner}}">
        <!-- 大赛 -->
        <view>
            <view class="competition-title">大赛</view>
            <view class="competition-list">
                <view class="competition-item" bindtap="toModelCompetition" data-item='{{item}}'
                      wx:for="{{competitionBannerList}}" wx:key="index">
                    <image mode="aspectFill" src="{{item.pic_url}}"></image>
                    <view class="competition-item-title">{{item.title}}</view>
                </view>
            </view>
        </view>
    </view>

    <!-- 引导加入花样学习活动群 -->
    <view class="guide-wrap" wx:if="{{didShowGuide}}" bindtap="onGuideTap">
        <view class="guide {{didExecuteGuideAnimation ? 'animation' : ''}}">
            <view>
                <image class="guide-pic" mode="aspectFit" src="https://huayang-img.oss-cn-shanghai.aliyuncs.com/1618560928medyIv.jpg"></image>
                <text class="guide-text">立即加入「花样学习活动群」</text>
            </view>
            <view class="guide-btn">进群</view>
            <image class="guide-close-icon" catchtap="closeGuide" mode="aspectFit" src="https://huayang-img.oss-cn-shanghai.aliyuncs.com/1618560964nUbRZc.jpg"></image>
        </view>
    </view>

    <!-- 全局消息弹窗 -->
    <view class="information" catchtouchmove="onCatchtouchmove" wx:if="{{didShowInformation}}">
        <view class="information-mask {{showInformationPopAnime ? 'animation' : ''}}"></view>
        <block wx:if="{{popData.type === 'new_kecheng'}}">
            <view class="information-content {{showInformationPopAnime ? 'animation' : ''}}">
                <view class="information-pop-title">{{popData.popTitle}}</view>
                <view class="information-pop-info">
                    <image class="information-teacher-avatar" mode="aspectFit" src="{{popData.avatar}}"></image>
                    <view class="information-course-info">
                        <text class="information-course-name limit-one-line">{{popData.title}}</text>
                        <text class="information-course-desc limit-two-line">{{popData.desc}}</text>
                        <text class="information-course-teacher-info limit-one-line">{{popData.name}}</text>
                    </view>
                </view>
                <view class="information-pop-btn" bindtap="onInformationPopTap">立即查看</view>
                <image class="information-pop-close" bindtap="closeInformationPop" mode="aspectFit"
                       src="https://huayang-img.oss-cn-shanghai.aliyuncs.com/1617938508Usopwi.jpg"></image>
                <view class="information-pop-clock">
                    <view class="information-pop-clock-item {{showInformationPopAnime ? 'animation' : ''}}"></view>
                </view>
            </view>
        </block>
        <block wx:if="{{popData.type === 'normal'}}">
            <view class="information-pop-picture-wrap" style="top: calc(50vh - 300rpx / {{popData.pictureRatio}});">
                <image class="information-pop-picture {{showInformationPopAnime ? 'animation' : ''}}"
                       bindtap="jumpToLink" src="{{popData.picture}}" mode="widthFix"></image>
                <image class="information-pop-close" bindtap="closeInformationPop" mode="aspectFit"
                       src="https://huayang-img.oss-cn-shanghai.aliyuncs.com/1617938508Usopwi.jpg"></image>
            </view>
        </block>
    </view>

    <!-- 授权弹窗 -->
    <authModule show="{{didShowAuth}}" bind:authCancelEvent="authCancelEvent"
                bind:authCompleteEvent="authCompleteEvent">
    </authModule>

    <!-- 客服弹窗 -->
    <contact show="{{didShowContact}}" isRootPage="{{true}}" sessionFrom="sf_study_guide"
             bind:closeContactModal="onCloseContactModal" />
</view>
